import{h as K}from"./kaplay-bxqp4ndF.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function d(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=d(e);fetch(e.href,o)}})();K({width:1280,height:720,canvas:document.querySelector("#mycanvas"),letterbox:!0});function A(n){return 1+.7*Math.sin(n*2*Math.PI*2)/Math.exp(n*4)}function M(n,c,d,s){loadSprite(n,c).then(e=>{let o=getSprite(n).data,i=add([pos(d,s),particles({max:20,lifeTime:[2,5],speed:[50,200],acceleration:[vec2(0),vec2(0,-10)],damping:[0,.5],angle:[0,40],angularVelocity:[-20,-20],scales:[.1],opacities:[1,0],texture:o.tex,quads:o.frames},{shape:new Rect(vec2(0),32,32),lifetime:5,rate:5,direction:-90,spread:20})]);i.onEnd(()=>{destroy(i)}),i.emit(5)})}function m({message:n="",x:c=center().x,y:d=center().y-200}={}){play("beep",{volume:1});const s=add([anchor("center"),pos(c,d),rect(400,100,{radius:8}),outline(4,BLACK),scale(.1),opacity(1),{time:0,scaleTime:0}]),e=s.add([anchor("center"),text(n,{size:26,opacity:1}),color(BLACK)]);s.onUpdate(()=>{s.time+=dt(),s.scaleTo(A(s.time*2)),s.time>2&&(s.opacity-=dt(),e.opacity-=dt()/2)})}const P=250,I=[vec2(Math.cos(0),Math.sin(0)).scale(P),vec2(Math.cos(Math.PI/3),Math.sin(Math.PI/3)).scale(P),vec2(Math.cos(2*Math.PI/3),Math.sin(2*Math.PI/3)).scale(P),vec2(Math.cos(Math.PI),Math.sin(Math.PI)).scale(P),vec2(Math.cos(4*Math.PI/3),Math.sin(4*Math.PI/3)).scale(P),vec2(Math.cos(5*Math.PI/3),Math.sin(5*Math.PI/3)).scale(P)];function C(n=null){switch(n!==null?n:randi(0,4)){case 0:return vec2(rand(0,width()),-100);case 1:return vec2(rand(0,width()),height()+100);case 2:return vec2(-100,rand(0,height()));case 3:return vec2(width()+100,rand(0,height()))}}function B(n,c,d,s){loadSprite(n,c).then(e=>{let o=getSprite(n).data,i=add([pos(d,s),particles({max:20,lifeTime:[2,5],speed:[200,500],acceleration:[vec2(0),vec2(0,-10)],damping:[0,.5],angle:[0,40],angularVelocity:[-20,-20],scales:[.3,.2,.1],opacities:[1,0],texture:o.tex,quads:o.frames},{shape:new Rect(vec2(0),32,32),lifetime:.5,rate:5,direction:-90,spread:360})]);i.onEnd(()=>{destroy(i)}),i.emit(5)})}loadRoot("./");loadSprite("nublin","/sprites/pets/nublin.png");loadSprite("werm","/sprites/pets/werm.png");loadSprite("eye","/sprites/pets/eye.png");loadSprite("bg_day","/sprites/backgrounds/morning_bg.png");loadSprite("button_feed","/sprites/buttons/button_feed.png");loadSprite("button_feed_pressed","/sprites/buttons/button_feed_pushed.png");loadSprite("button_kill","/sprites/buttons/button_kill.png");loadSprite("button_kill_pressed","/sprites/buttons/button_kill_pushed.png");loadSprite("button_play","/sprites/buttons/button_play.png");loadSprite("button_play_pressed","/sprites/buttons/button_play_pushed.png");loadSprite("apple","/sprites/objects/apple.png");loadSprite("grave","/sprites/objects/grave.png");loadSprite("poop","/sprites/objects/poop.png");loadSprite("poison","/sprites/particles/effect_poison.png");loadSprite("flame","/sprites/particles/effect_flame.png");loadSprite("enemy","/sprites/objects/enemy.png");loadSprite("enemy2","/sprites/objects/enemy2.png");loadSprite("bg_night","/sprites/backgrounds/night_bg.png");loadSprite("sword","/sprites/objects/sword.png");loadSprite("hit","/sprites/particles/effect_hit.png");loadSound("beep","/sounds/beep.mp3");loadSound("click","/sounds/click.mp3");loadSound("eat","/sounds/eat.mp3");loadSound("meow","/sounds/meow.wav");loadSound("bong","/sounds/bell.mp3");loadSound("fart","/sounds/fart.mp3");loadSound("bullet","/sounds/bullet.wav");loadSound("reload","/sounds/reload.mp3");loadSound("night_song","/sounds/skeleton_song.mp3");loadSound("hurt","/sounds/snd_hurt1.wav");loadSound("punch","/sounds/punch.wav");loadSound("bell","/sounds/snd_bell.wav");loadSound("warning","/sounds/warning.mp3");loadSound("combo1","/sounds/combo1.mp3");loadSound("combo2","/sounds/combo2.mp3");loadSound("combo3","/sounds/combo3.mp3");loadSound("combo4","/sounds/combo4.mp3");loadSound("combo5","/sounds/combo5.mp3");scene("play",()=>{const n=play("night_song",{volume:.15});onDraw(()=>{drawSprite({sprite:"bg_night",pos:center(),anchor:"center"})});function c(){const t=C(),p=add([pos(t),sprite("enemy"),anchor("center"),area({shape:new Polygon(I)}),scale(.2),rotate(0),animate(),{time:0,prevPos:center().clone()},"enemy","destructable"]);onUpdate(()=>{p.pos=p.pos.lerp(a.pos,e/8e3)}),wait(rand(0,4-e/100),()=>{f&&c()})}function d(){const t=C(),S=a.pos.clone().sub(t).unit().scale(e*5),v=add([pos(t),sprite("enemy2"),anchor("center"),area({shape:new Polygon(I)}),scale(.2),rotate(0),animate(),{time:0,velocity:S},"enemy","destructable"]);onUpdate(()=>{v.move(v.velocity)}),wait(rand(0,4-e/100),()=>{f&&d()})}function s(){const t=randi(0,4);let p=randi(0,4);for(;p===t;)p=randi(0,4);const S=C(t),v=C(p);play("warning",{volume:.2}),add([opacity(.5),{time:0,blinkCount:0,visible:!0,draw(){this.visible&&drawLine({p1:S,p2:v,width:70,color:rgb(255,255,255)})},update(){this.time+=dt(),this.time>=.1&&(this.visible=!this.visible,this.time=0,this.visible||this.blinkCount++,this.blinkCount>=4&&destroy(this))}}]);const L=v.sub(S).unit().scale(2e3);wait(.5,()=>{add([pos(S),sprite("sword"),anchor("center"),area({shape:new Polygon(I)}),scale(.05),rotate(),{update(){this.move(L),this.angle+=dt()*1e3}},"enemy"])}),wait(rand(0,4-e/100),()=>{f&&s()})}var e=0,o=10,i=.9,u=!1,y,w=3,f=!0;const a=add([pos(center()),sprite("nublin"),anchor("center"),area(),scale(.2),rotate(0),animate(),{time:0,prevPos:center().clone()},"pet"]);c(),d(),s(),onUpdate(()=>{if(e+=dt(),u)a.pos=a.pos.lerp(y,.1);else{const t=mousePos(),p=t.sub(a.pos).unit(),v=t.sub(p.scale(100));a.pos=a.pos.lerp(v,.1);const T=Math.atan2(p.y,p.x);a.angle=rad2deg(T),a.prevPos=a.pos.clone()}});var b=[];function g(){for(const p of b)p.destroy();b=[];for(var t=0;t<o;t++){const p=add([pos(width()-100-t*50,height()-100),sprite("flame"),scale(.2),opacity(1)]);b[t]=p}debug.log(b.length)}f&&onClick(()=>{if(g(),o>0&&!u){play("bullet",{volume:.2});const t=add([pos(a.pos),sprite("flame"),anchor("center"),area(),scale(.3),rotate(0),move(a.angle,1200),"flame"]);wait(3,()=>{t.destroy()}),o--}}),a.onUpdate(()=>{u&&(i-=dt(),i<=0&&(u=!1,i=.9,o=10,g()))}),onKeyPress("r",()=>{u||(y=mousePos(),u=!0,play("reload"))});var h=.2,l=0;onCollide("pet","enemy",()=>{play("hurt"),shake(),w--,w<=0?(n.paused=!0,m({message:"u dun killt me ðŸ’€",x:a.pos.x,y:a.pos.y}),a.destroy(),f=!1):m({message:"yowch!",x:a.pos.x,y:a.pos.y})});var k=0,_;onCollide("destructable","flame",(t,p)=>{switch(t.destroy(),p.destroy(),play("punch",{volume:.2}),wait(.4,()=>{play("bell",{volume:.4})}),B("hit","/sprites/particles/effect_hit.png",t.pos.x,t.pos.y),shake(),l++,h=.5,_&&_.destroy(),_=x.add([pos(10,10),scale(2),text(`Score: ${k}`,{size:26,opacity:1}),color(BLACK)]),l){case 1:play("combo1");break;case 2:play("combo2");break;case 3:play("combo3");break;case 4:play("combo4");break;case 5:play("combo5");break}k+=l*10}),onUpdate(()=>{l>0&&(h-=dt(),h<=0&&(l=0,h=.5))});const x=add([pos(10,10),rect(400,100,{radius:8}),outline(4,BLACK),scale(.5),opacity(1),{time:0,scaleTime:0}]);onKeyPress("p",()=>{n.stop(),go("play")}),onKeyPress("escape",()=>{n.stop("night_song"),go("main")})});scene("main",()=>{function n(){g||wait(rand(0,40),()=>{const t=add([pos(center().x+rand(0,600),center().y+rand(0,200)),sprite("poop"),anchor("center"),area(),scale(.5),{time:0},"poop"]);h++,t.onClick(()=>{var p=randi(0,10);p==1&&m({message:`u betta wash ya hands
 b4 u feed me nasty :p`}),play("beep"),M("heal","/sprites/particles/effect_heal.png",mousePos().x,mousePos().y),t.destroy(),h--}),n()})}const c=.1,d=.5,s=["nublin","werm","eye"];let e=1,o=40,i=100,u=0,y=!1,w=!1,f=1,a=!1,b=!1,g=!1,h=0;onDraw(()=>{drawSprite({sprite:"bg_day",pos:center(),anchor:"center"})});const l=add([pos(center()),sprite("nublin"),anchor("center"),area(),scale(.5),animate(),{time:0},"pet"]),k=add([pos(center().x,center().y+280),sprite("button_feed"),anchor("center"),area(),scale(1),{time:0},"button_feed"]),_=add([pos(center().x+250,center().y+280),sprite("button_kill"),anchor("center"),area(),scale(1),{time:0},"button_kill"]),x=add([pos(center().x-250,center().y+280),sprite("button_play"),anchor("center"),area(),scale(1),{time:0},"button_play"]);wait(e-.5,()=>{m({message:`heh... ima pet!
takea good care of me >:3 `})}),wait(e-.5,()=>{m({message:`heh... ima pet!
takea good care of me >:3 `})}),l.onUpdate(()=>{l.pos=l.pos.lerp(vec2(center().x+(mousePos().x-center().x)*c,center().y+(mousePos().y-center().y)*c),.04),l.time+=dt(),l.pos.y+=Math.sin(l.time*4),o-=dt(),w&&(f-=dt(),f<=0&&o<i&&(f=2,w=!1,a=!0)),a&&o<i&&(l.scaleBy(.99),l.scale<=vec2(.5,.5)&&(a=!1)),o<20&&!b?(m({message:`mannnn.....
 im hungy....`}),b=!0):o>20&&b&&(b=!1),(g||o<=0&&!g)&&(shake(),m({message:"im dead asl ðŸ’€"}),g=!0,l.destroy(),add([pos(center()),sprite("grave"),anchor("center"),area(),scale(2),animate(),{time:0},"grave"]),play("bong",{volume:.3}))}),n(),l.onClick(()=>{if(y){if(time()-e>=d)if(!h&&o<i){var t=randi(0,10);t==1&&m({message:"yyummerzz >:3"}),M("heal","/sprites/particles/effect_heal.png",mousePos().x,mousePos().y),play("eat",{volume:.3}),l.scaleBy(1.05),y=!1,f=5,w=!0,g||(o+=20)}else if(h>0&&o>=i)M("poison","/sprites/particles/effect_poison.png",mousePos().x,mousePos().y),m({message:`im seriously gonna throw up
 get that away from mee`});else if(h>0){var t=randi(0,2);t==1&&m({message:`theres like.. poop
 right there. nasty`}),e=time()}else{var t=randi(0,3);t==1&&m({message:"im fucken fullll bro."}),e=time()}}else time()-e>=d&&(e=time(),M("heart","/sprites/particles/effect_heart.png",mousePos().x,mousePos().y),play("meow",{volume:1}))}),onKeyPress("a",()=>{u=(u-1+s.length)%s.length,l.sprite=s[u]}),onKeyPress("d",()=>{u=(u+1)%3,l.sprite=s[u]}),onClick("button_feed",()=>{const t=add([pos(mousePos()),sprite("apple"),anchor("center"),area(),scale(.5),{time:0},"apple"]);k.sprite="button_feed_pressed",play("click",{volume:.3}),y=!y,onUpdate(()=>{t.pos=mousePos(),y||(t.destroy(),k.sprite="button_feed")})}),onMousePress("right",()=>{y=!1}),onClick("button_kill",()=>{g=!0,_.sprite="button_kill_pressed",wait(.2,()=>{_.sprite="button_kill"})}),onClick("button_play",()=>{x.sprite="button_play_pressed",wait(.2,()=>{x.sprite="button_play"}),go("play")})});go("play");r;
//# sourceMappingURL=index-Dh0R59p7.js.map
