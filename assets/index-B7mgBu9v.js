import{h as x}from"./kaplay-bxqp4ndF.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function p(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=p(e);fetch(e.href,t)}})();x({width:1280,height:720,canvas:document.querySelector("#mycanvas"),letterbox:!0});loadRoot("./");loadSprite("nublin","/sprites/pets/nublin.png");loadSprite("werm","/sprites/pets/werm.png");loadSprite("eye","/sprites/pets/eye.png");loadSprite("bg_day","/sprites/backgrounds/morning_bg.png");loadSprite("button_feed","/sprites/buttons/button_feed.png");loadSprite("button_feed_pressed","/sprites/buttons/button_feed_pushed.png");loadSprite("button_kill","/sprites/buttons/button_kill.png");loadSprite("button_kill_pressed","/sprites/buttons/button_kill_pushed.png");loadSprite("button_play","/sprites/buttons/button_play.png");loadSprite("button_play_pressed","/sprites/buttons/button_play_pushed.png");loadSprite("apple","/sprites/objects/apple.png");loadSprite("grave","/sprites/objects/grave.png");loadSprite("poop","/sprites/objects/poop.png");loadSprite("poison","/sprites/objects/effect_poison.png");loadSound("beep","/sounds/beep.mp3");loadSound("click","/sounds/click.mp3");loadSound("eat","/sounds/eat.mp3");loadSound("meow","/sounds/meow.wav");loadSound("bell","/sounds/bell.mp3");loadSound("fart","/sounds/fart.mp3");function I(a){return 1+.7*Math.sin(a*2*Math.PI*2)/Math.exp(a*4)}function v(a,n,p,o){loadSprite(a,n).then(e=>{let t=getSprite(a).data,r=add([pos(p,o),particles({max:20,lifeTime:[2,5],speed:[50,200],acceleration:[vec2(0),vec2(0,-10)],damping:[0,.5],angle:[0,40],angularVelocity:[-20,-20],scales:[.1],opacities:[1,0],texture:t.tex,quads:t.frames},{shape:new Rect(vec2(0),32,32),lifetime:5,rate:5,direction:-90,spread:20})]);r.onEnd(()=>{destroy(r)}),r.emit(5)})}function u({message:a="",x:n=center().x,y:p=center().y-200}={}){play("beep",{volume:1});const o=add([anchor("center"),pos(n,p),rect(400,100,{radius:8}),outline(4,BLACK),scale(.1),opacity(1),{time:0,scaleTime:0}]),e=o.add([anchor("center"),text(a,{size:26,opacity:1}),color(BLACK)]);o.onUpdate(()=>{o.time+=dt(),o.scaleTo(I(o.time*2)),o.time>2&&(o.opacity-=dt(),e.opacity-=dt()/2)})}scene("main",()=>{function a(){h||wait(rand(0,40),()=>{const d=add([pos(center().x+rand(0,600),center().y+rand(0,200)),sprite("poop"),anchor("center"),area(),scale(.5),{time:0},"poop"]);b++,d.onClick(()=>{var k=randi(0,10);k==1&&u({message:`u betta wash ya hands
 b4 u feed me nasty :p`}),play("beep"),v("heal","/sprites/particles/effect_heal.png",mousePos().x,mousePos().y),d.destroy(),b--}),a()})}const n=.1,p=.5,o=["nublin","werm","eye"];let e=1,t=40,r=100,m=0,s=!1,i=!1,l=1,y=!1,f=!1,h=!1,b=0;onDraw(()=>{drawSprite({sprite:"bg_day",pos:center(),anchor:"center"})});const c=add([pos(center()),sprite("nublin"),anchor("center"),area(),scale(.5),animate(),{time:0},"pet"]),_=add([pos(center().x,center().y+280),sprite("button_feed"),anchor("center"),area(),scale(1),{time:0},"button_feed"]),P=add([pos(center().x+250,center().y+280),sprite("button_kill"),anchor("center"),area(),scale(1),{time:0},"button_kill"]),w=add([pos(center().x-250,center().y+280),sprite("button_play"),anchor("center"),area(),scale(1),{time:0},"button_play"]);wait(e-.5,()=>{u({message:`heh... ima pet!
takea good care of me >:3 `})}),wait(e-.5,()=>{u({message:`heh... ima pet!
takea good care of me >:3 `})}),c.onUpdate(()=>{c.pos=c.pos.lerp(vec2(center().x+(mousePos().x-center().x)*n,center().y+(mousePos().y-center().y)*n),.04),c.time+=dt(),c.pos.y+=Math.sin(c.time*4),t-=dt(),i&&(l-=dt(),l<=0&&t<r&&(l=2,i=!1,y=!0)),y&&t<r&&(c.scaleBy(.99),c.scale<=vec2(.5,.5)&&(y=!1)),t<20&&!f?(u({message:`mannnn.....
 im hungy....`}),f=!0):t>20&&f&&(f=!1),(h||t<=0&&!h)&&(shake(),u({message:"im dead asl ðŸ’€"}),h=!0,c.destroy(),add([pos(center()),sprite("grave"),anchor("center"),area(),scale(2),animate(),{time:0},"grave"]),play("bell",{volume:.3}))}),a(),c.onClick(()=>{if(s){if(time()-e>=p)if(!b&&t<r){var d=randi(0,10);d==1&&u({message:"yyummerzz >:3"}),v("heal","/sprites/particles/effect_heal.png",mousePos().x,mousePos().y),play("eat",{volume:.3}),c.scaleBy(1.05),s=!1,l=5,i=!0,h||(t+=20)}else if(b>0&&t>=r)v("poison","/sprites/particles/effect_poison.png",mousePos().x,mousePos().y),u({message:`im seriously gonna throw up
 get that away from mee`});else if(b>0){var d=randi(0,2);d==1&&u({message:`theres like.. poop
 right there. nasty`}),e=time()}else{var d=randi(0,3);d==1&&u({message:"im fucken fullll bro."}),e=time()}}else time()-e>=p&&(e=time(),v("heart","/sprites/particles/effect_heart.png",mousePos().x,mousePos().y),play("meow",{volume:1}))}),onKeyPress("a",()=>{m=(m-1+o.length)%o.length,c.sprite=o[m]}),onKeyPress("d",()=>{m=(m+1)%3,c.sprite=o[m]}),onClick("button_feed",()=>{const d=add([pos(mousePos()),sprite("apple"),anchor("center"),area(),scale(.5),{time:0},"apple"]);_.sprite="button_feed_pressed",play("click",{volume:.3}),s=!s,onUpdate(()=>{d.pos=mousePos(),s||(d.destroy(),_.sprite="button_feed")})}),onMousePress("right",()=>{s=!1}),onClick("button_kill",()=>{h=!0,P.sprite="button_kill_pressed",wait(.2,()=>{P.sprite="button_kill"})}),onClick("button_play",()=>{w.sprite="button_play_pressed",wait(.2,()=>{w.sprite="button_play"}),go("play")})});loadSprite("flame","/sprites/particles/effect_flame.png");loadSprite("enemy","/sprites/objects/enemy.png");loadSprite("enemy2","/sprites/objects/enemy2.png");loadSound("bullet","/sounds/bullet.wav");loadSound("reload","/sounds/reload.mp3");loadSprite("bg_night","/sprites/backgrounds/night_bg.png");const g=250,S=[vec2(Math.cos(0),Math.sin(0)).scale(g),vec2(Math.cos(Math.PI/3),Math.sin(Math.PI/3)).scale(g),vec2(Math.cos(2*Math.PI/3),Math.sin(2*Math.PI/3)).scale(g),vec2(Math.cos(Math.PI),Math.sin(Math.PI)).scale(g),vec2(Math.cos(4*Math.PI/3),Math.sin(4*Math.PI/3)).scale(g),vec2(Math.cos(5*Math.PI/3),Math.sin(5*Math.PI/3)).scale(g)];function M(){switch(randi(0,4)){case 0:return vec2(rand(0,width()),-100);case 1:return vec2(rand(0,width()),height()+100);case 2:return vec2(-100,rand(0,height()));case 3:return vec2(width()+100,rand(0,height()))}}scene("play",()=>{onDraw(()=>{drawSprite({sprite:"bg_night",pos:center(),anchor:"center"})});function a(){const i=M(),l=add([pos(i),sprite("enemy"),anchor("center"),area({shape:new Polygon(S)}),scale(.3),rotate(0),animate(),{time:0,prevPos:center().clone()},"enemy"]);onUpdate(()=>{l.pos=l.pos.lerp(s.pos,.01)}),wait(rand(0,5),()=>{a()})}function n(){const i=M(),y=s.pos.clone().sub(i).unit().scale(400),f=add([pos(i),sprite("enemy2"),anchor("center"),area({shape:new Polygon(S)}),scale(.3),rotate(0),animate(),{time:0,velocity:y},"enemy"]);onUpdate(()=>{f.move(f.velocity)}),wait(rand(0,5),()=>{n()})}var p=10,o=1.5,e=!1,t,r=3,m=!0;const s=add([pos(center()),sprite("nublin"),anchor("center"),area(),scale(.3),rotate(0),animate(),{time:0,prevPos:center().clone()},"pet"]);a(),n(),onUpdate(()=>{if(e)s.pos=s.pos.lerp(t,.1);else{const i=mousePos(),l=i.sub(s.pos).unit(),f=i.sub(l.scale(100));s.pos=s.pos.lerp(f,.1);const h=Math.atan2(l.y,l.x);s.angle=rad2deg(h),s.prevPos=s.pos.clone()}}),m&&onClick(()=>{if(p>0&&!e){play("bullet",{volume:.2});const i=add([pos(s.pos),sprite("flame"),anchor("center"),area(),scale(.3),rotate(0),move(s.angle,1200),"flame"]);wait(3,()=>{i.destroy()}),p--}}),s.onUpdate(()=>{e&&(o-=dt(),o<=0&&(e=!1,o=1.5,p=10))}),onKeyPress("r",()=>{e||(t=mousePos(),e=!0,play("reload"))}),onCollide("pet","enemy",()=>{shake(),r--,r<=0?(u({message:"u dun killt me ðŸ’€",x:s.pos.x,y:s.pos.y}),s.destroy(),m=!1):u({message:"yowch!",x:s.pos.x,y:s.pos.y})}),onCollide("enemy","flame",(i,l)=>{i.destroy(),l.destroy(),shake()})});go("main");
//# sourceMappingURL=index-B7mgBu9v.js.map
